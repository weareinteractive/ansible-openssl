---
# Manually generated fingerprints as http://www.cacert.org/index.php?id=3
# doesn't list them.

- name: Create directory for cacert certificates
  file: recurse=yes group=root owner=root state=directory
    path=/usr/local/share/ca-certificates/cacert.org/

- name: Download CAcert Class 1 PKI key
  get_url:
    dest=/usr/local/share/ca-certificates/cacert.org/
    url=http://www.cacert.org/certs/root.crt
    sha256shum='c0e0773a79dceb622ef6410577c19c1e177fb2eb9c623a49340de3c9f1de2560'

- name: Download CAcert Class 3 PKI key
  get_url:
    dest=/usr/local/share/ca-certificates/cacert.org/
    url=http://www.cacert.org/certs/class3.crt
    sha256sum='f5badaa5da1cc05b110a9492455a2c2790d00c7175dcf3a7bcb5441af71bf84f'

# Don't run if the cert has already been installed
- name: Update ca certificates to enable CAcert
  command: update-ca-certificates
    creates=/etc/ssl/certs/cacert.org.pem

